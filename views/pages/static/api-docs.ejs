<%# API Documentation - shows we have a real API %>

<div class="api-docs">
  <div class="container">
    <header class="api-header">
      <h1>API Documentation</h1>
      <p>REST API endpoints for SkillSwap. All endpoints return JSON.</p>
      <div class="api-version">v1.0</div>
    </header>

    <div class="api-content">
      <nav class="api-nav">
        <h3>Endpoints</h3>
        <ul>
          <li><a href="#auth">Authentication</a></li>
          <li><a href="#users">Users</a></li>
          <li><a href="#sessions">Sessions</a></li>
          <li><a href="#reviews">Reviews</a></li>
          <li><a href="#messages">Messages</a></li>
        </ul>
      </nav>

      <main class="api-main">
        <!-- Auth -->
        <section id="auth" class="api-section">
          <h2>Authentication</h2>
          <p>All authenticated endpoints require a valid session cookie.</p>

          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <code>/api/auth/login</code>
            </div>
            <p>Authenticate a user and create a session.</p>
            <div class="endpoint-details">
              <h4>Request Body</h4>
              <pre><code>{
  "email": "user@example.com",
  "password": "password123"
}</code></pre>
              <h4>Response</h4>
              <pre><code>{
  "success": true,
  "user": {
    "id": "...",
    "name": "John Doe",
    "email": "user@example.com",
    "role": "student"
  }
}</code></pre>
            </div>
          </div>

          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <code>/api/auth/logout</code>
            </div>
            <p>End the current session.</p>
          </div>
        </section>

        <!-- Users -->
        <section id="users" class="api-section">
          <h2>Users</h2>

          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <code>/api/users</code>
            </div>
            <p>Get list of tutors. Supports filtering and pagination.</p>
            <div class="endpoint-details">
              <h4>Query Parameters</h4>
              <table class="param-table">
                <tr><td><code>skill</code></td><td>Filter by skill offered</td></tr>
                <tr><td><code>page</code></td><td>Page number (default: 1)</td></tr>
                <tr><td><code>limit</code></td><td>Results per page (default: 20)</td></tr>
                <tr><td><code>sort</code></td><td>Sort by: rating, sessions, name</td></tr>
              </table>
            </div>
          </div>

          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <code>/api/users/:id</code>
            </div>
            <p>Get a specific user's public profile.</p>
          </div>

          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method put">PUT</span>
              <code>/api/users/:id</code>
            </div>
            <p>Update user profile. Requires authentication.</p>
          </div>
        </section>

        <!-- Sessions -->
        <section id="sessions" class="api-section">
          <h2>Sessions</h2>

          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <code>/api/sessions</code>
            </div>
            <p>Get user's sessions. Requires authentication.</p>
            <div class="endpoint-details">
              <h4>Query Parameters</h4>
              <table class="param-table">
                <tr><td><code>status</code></td><td>Filter: pending, scheduled, completed, cancelled</td></tr>
                <tr><td><code>role</code></td><td>Filter: tutor, student</td></tr>
              </table>
            </div>
          </div>

          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <code>/api/sessions</code>
            </div>
            <p>Create a new session request.</p>
            <div class="endpoint-details">
              <h4>Request Body</h4>
              <pre><code>{
  "tutor": "tutor_id",
  "skill": "AP Calculus",
  "scheduledDate": "2025-02-01T16:00:00Z",
  "duration": 60,
  "location": "Library",
  "notes": "Chapter 5 review"
}</code></pre>
            </div>
          </div>

          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method patch">PATCH</span>
              <code>/api/sessions/:id/status</code>
            </div>
            <p>Update session status (accept, cancel, complete).</p>
          </div>
        </section>

        <!-- Reviews -->
        <section id="reviews" class="api-section">
          <h2>Reviews</h2>

          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <code>/api/reviews</code>
            </div>
            <p>Get reviews for a user.</p>
          </div>

          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <code>/api/reviews</code>
            </div>
            <p>Create a review for a completed session.</p>
            <div class="endpoint-details">
              <h4>Request Body</h4>
              <pre><code>{
  "session": "session_id",
  "rating": 5,
  "comment": "Great tutor!"
}</code></pre>
            </div>
          </div>
        </section>

        <!-- Messages -->
        <section id="messages" class="api-section">
          <h2>Messages</h2>

          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <code>/api/messages</code>
            </div>
            <p>Get user's conversations.</p>
          </div>

          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <code>/api/messages/:userId</code>
            </div>
            <p>Get messages with a specific user.</p>
          </div>

          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <code>/api/messages</code>
            </div>
            <p>Send a message.</p>
            <div class="endpoint-details">
              <h4>Request Body</h4>
              <pre><code>{
  "receiver": "user_id",
  "content": "Hey, are you free Thursday?"
}</code></pre>
            </div>
          </div>
        </section>

        <!-- Errors -->
        <section id="errors" class="api-section">
          <h2>Error Responses</h2>
          <p>All errors return JSON with this format:</p>
          <pre><code>{
  "success": false,
  "error": "Error message here"
}</code></pre>
          <h4>Status Codes</h4>
          <table class="param-table">
            <tr><td><code>400</code></td><td>Bad Request - Invalid input</td></tr>
            <tr><td><code>401</code></td><td>Unauthorized - Not logged in</td></tr>
            <tr><td><code>403</code></td><td>Forbidden - No permission</td></tr>
            <tr><td><code>404</code></td><td>Not Found</td></tr>
            <tr><td><code>429</code></td><td>Too Many Requests - Rate limited</td></tr>
            <tr><td><code>500</code></td><td>Server Error</td></tr>
          </table>
        </section>
      </main>
    </div>
  </div>
</div>

<style>
.api-docs {
  padding: 2rem 0;
  min-height: 100vh;
  background: var(--neutral-50);
}

.api-header {
  margin-bottom: 2rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--neutral-200);
}

.api-header h1 {
  margin: 0 0 0.5rem 0;
}

.api-header p {
  color: var(--neutral-600);
  margin: 0;
}

.api-version {
  display: inline-block;
  margin-top: 0.5rem;
  padding: 0.25rem 0.75rem;
  background: var(--primary-100);
  color: var(--primary-700);
  border-radius: 1rem;
  font-size: 0.875rem;
  font-weight: 500;
}

.api-content {
  display: grid;
  grid-template-columns: 200px 1fr;
  gap: 2rem;
}

@media (max-width: 768px) {
  .api-content {
    grid-template-columns: 1fr;
  }
}

.api-nav {
  position: sticky;
  top: 1rem;
  align-self: start;
}

.api-nav h3 {
  font-size: 0.875rem;
  text-transform: uppercase;
  color: var(--neutral-500);
  margin: 0 0 0.75rem 0;
}

.api-nav ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.api-nav a {
  display: block;
  padding: 0.5rem 0;
  color: var(--neutral-600);
  text-decoration: none;
}

.api-nav a:hover {
  color: var(--primary-600);
}

.api-section {
  margin-bottom: 3rem;
  padding-bottom: 2rem;
  border-bottom: 1px solid var(--neutral-200);
}

.api-section h2 {
  margin: 0 0 1rem 0;
}

.endpoint {
  background: white;
  border: 1px solid var(--neutral-200);
  border-radius: 0.5rem;
  margin-bottom: 1rem;
  overflow: hidden;
}

.endpoint-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem;
  background: var(--neutral-50);
  border-bottom: 1px solid var(--neutral-200);
}

.method {
  padding: 0.25rem 0.5rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
}

.method.get { background: #dbeafe; color: #1d4ed8; }
.method.post { background: #dcfce7; color: #15803d; }
.method.put { background: #fef3c7; color: #b45309; }
.method.patch { background: #fef3c7; color: #b45309; }
.method.delete { background: #fee2e2; color: #dc2626; }

.endpoint-header code {
  font-size: 0.9375rem;
}

.endpoint > p {
  padding: 1rem;
  margin: 0;
  color: var(--neutral-600);
}

.endpoint-details {
  padding: 0 1rem 1rem;
}

.endpoint-details h4 {
  font-size: 0.875rem;
  color: var(--neutral-500);
  margin: 1rem 0 0.5rem 0;
}

.endpoint-details pre {
  background: var(--neutral-800);
  color: #e2e8f0;
  padding: 1rem;
  border-radius: 0.375rem;
  overflow-x: auto;
  font-size: 0.875rem;
  margin: 0;
}

.param-table {
  width: 100%;
  border-collapse: collapse;
}

.param-table td {
  padding: 0.5rem;
  border-bottom: 1px solid var(--neutral-100);
}

.param-table td:first-child {
  width: 120px;
}

.param-table code {
  background: var(--neutral-100);
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  font-size: 0.875rem;
}
</style>
